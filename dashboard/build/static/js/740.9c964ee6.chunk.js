"use strict";(self.webpackChunkapiaries_16_dashboard=self.webpackChunkapiaries_16_dashboard||[]).push([[740],{83740:(e,t,n)=>{n.r(t),n.d(t,{CreateUpdateEquipment:()=>L,default:()=>O});var i=n(68282),a=n(26298),r=n(58294),s=n(83648),o=n(25813),c=n(16789),l=n(59251),d=n(63945),u=n(35016),m=(n(12682),n(49779)),h=n(80608),p=(n(85785),n(97950),n(47417),n(77183)),x=n(74503),g=(n(22562),n(38079)),j=n(28326);function A(e){let{info:t,children:n}=e;const[c,l]=(0,r.useState)("horizontal"),[d,u]=(0,r.useState)(0);(0,r.useEffect)((()=>{function e(){return window.innerWidth<x.A.values.sm?l("vertical"):l("horizontal")}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[c]);const{image:m="",station_name:h,location:A}=t;return(0,j.jsxs)(s.A,{position:"relative",mb:5,children:[(0,j.jsx)(s.A,{display:"flex",alignItems:"center",position:"relative",minHeight:"18.75rem",borderRadius:"xl",sx:{backgroundImage:e=>{let{functions:{rgba:t,linearGradient:n},palette:{gradients:i}}=e;return`${n(t(i.info.main,.6),t(i.info.state,.6))}, url(${g})`},backgroundSize:"cover",backgroundPosition:"50%",overflow:"hidden"}}),(0,j.jsxs)(a.A,{sx:{position:"relative",mt:-8,mx:3,py:2,px:2},children:[(0,j.jsxs)(i.Ay,{container:!0,spacing:3,alignItems:"center",children:[(0,j.jsx)(i.Ay,{item:!0,children:(0,j.jsx)(p.A,{src:m,alt:"profile-image",size:"xl",shadow:"sm"})}),(0,j.jsx)(i.Ay,{item:!0,children:(0,j.jsxs)(s.A,{height:"100%",mt:.5,lineHeight:1,children:[(0,j.jsx)(o.A,{variant:"h5",fontWeight:"medium",children:h}),(0,j.jsx)(o.A,{variant:"button",color:"text",fontWeight:"regular",children:A})]})})]}),n]})]})}A.defaultProps={info:{image:"",station_name:"First Name",location:"Last Name"},children:null};var f=n(56084),_=n(24009),v=n(66801),y=n(40068),b=n(15570),q=n(74996),w=(n(14149),n(3186)),C=n(21614),k=n(98460);function E(){const e=(0,f.wA)(),{deleteEquipment:t}=(0,C.po)(),{equipments:{equipment:n=[],totalEquipments:i=0,count:a=0,numOfPages:r=0,categoryCount:c=[],statusCount:l=[],storageLocationCount:d=[]}={},refetch:u,isGettingAllequipments:m}=(0,C.ZQ)(),h=e=>{let{image:t,name:n,retired:i,tool_id:a}=e;return(0,j.jsxs)(s.A,{display:"flex",alignItems:"center",lineHeight:1,children:[(0,j.jsx)(p.A,{src:t,name:n,size:"sm"}),(0,j.jsxs)(s.A,{ml:2,lineHeight:1,children:[(0,j.jsx)(o.A,{display:"block",variant:"button",fontWeight:"medium",children:(0,j.jsx)(_.N_,{to:"#",children:`${a} ${n}`})}),(0,j.jsx)(o.A,{variant:"caption",children:i})]})]})},x=e=>{let{title:t,description:n}=e;return(0,j.jsxs)(s.A,{lineHeight:1,textAlign:"left",children:[(0,j.jsx)(o.A,{display:"block",variant:"caption",color:"text",fontWeight:"medium",children:(0,j.jsx)(_.N_,{to:"#",children:`${t}`})}),(0,j.jsx)(o.A,{variant:"caption",children:(0,j.jsx)(_.N_,{to:"#",children:`quantity: ${n}`})})]})},g=e=>{let{title:t,description:n}=e;return(0,j.jsxs)(s.A,{lineHeight:1,textAlign:"left",children:[(0,j.jsx)(o.A,{display:"block",variant:"caption",color:"text",fontWeight:"medium",children:t}),(0,j.jsx)(o.A,{variant:"caption",children:n})]})};return{columns:[{Header:"equipment",accessor:"equipment",width:"45%",align:"left"},{Header:"details",accessor:"details",align:"left"},{Header:"status",accessor:"status",align:"center"},{Header:"location",accessor:"location",align:"center"},{Header:"supplier",accessor:"supplier",align:"center"},{Header:"acquired",accessor:"acquired",align:"center"},{Header:"maintenance",accessor:"maintenance",align:"center"},{Header:"note",accessor:"note",align:"center"},{Header:"update",accessor:"update",align:"center"},{Header:"remove",accessor:"remove",align:"center"}],rows:n.map(((n,i)=>{const{tool_id:a,tool_name:r,category:c,quantity:l,status:d,storage_location:u,supplier:m,purchase_date:p,purchase_cost:A,currency:f,last_maintanace_date:v,next_maintanace_date:y,retired:b,note:C}=n,E={tool_id:a,tool_name:r,category:c,quantity:l,status:d,storage_location:u,supplier:m,purchase_date:p,purchase_cost:A,currency:f,last_maintanace_date:v,next_maintanace_date:y,retired:b,note:C};return{equipment:(0,j.jsx)(h,{image:q.A,name:r,retired:b,tool_id:a}),detail:(0,j.jsx)(x,{title:c,description:l}),status:(0,j.jsx)(s.A,{ml:-1,children:(0,j.jsx)(w.A,{badgeContent:d,color:"new"===d?"success":"used"===d?"warning":"error",variant:"gradient",size:"sm"})}),location:(0,j.jsx)(s.A,{ml:-1,children:(0,j.jsx)(w.A,{badgeContent:u,color:"warehouse"===u?"success":"factory"===u?"error":"warning",variant:"gradient",size:"sm"})}),supplier:(0,j.jsx)(o.A,{component:"a",variant:"caption",color:"text",fontWeight:"medium",children:m}),acquired:(0,j.jsx)(g,{title:`Cost: ${A?Number(A).toFixed(2):"N/A"} ${f||""}`,description:`Purchased on: ${p||"N/A"}`}),maintenance:(0,j.jsx)(g,{title:`Last maintenance: ${v||"N/A"}`,description:`Next maintenance: ${y||"N/A"}`}),note:(0,j.jsx)(o.A,{title:C,component:"a",href:"#",variant:"caption",color:"text",fontWeight:"medium",children:C.length>20?`${C.slice(0,20)}...`:C}),update:(0,j.jsx)(o.A,{component:"a",variant:"caption",color:"text",fontWeight:"medium",children:(0,j.jsx)(_.N_,{onClick:()=>{e((0,k.az)(E))},to:`/createupdateequipment/${a}`,children:"Edit"})}),remove:(0,j.jsx)(o.A,{component:"a",variant:"caption",color:"text",fontWeight:"medium",children:(0,j.jsx)(_.N_,{onClick:()=>{window.confirm("You are about to Delete an an equipment records permanently, ARE YOU SURE?")&&t(a)},children:"Remove"})})}})),numOfPages:r,count:a,refetch:u,totalEquipments:i,categoryCount:c,statusCount:l,storageLocationCount:d,isGettingAllequipments:m}}var H=n(40447),N=n(35981),$=n(48781),S=n(29340),W=n(18509),z=n(64977),P=n(29136);function G(e){let{isGettingAllequipments:t}=e;const[n,i]=r.useState(!1),a=()=>i(!1);return(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{children:(0,j.jsx)(S.MFA,{onClick:()=>i(!0),title:"filter"})}),(0,j.jsx)($.A,{open:n,onClose:a,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,j.jsxs)(H.A,{children:[(0,j.jsxs)(N.A,{id:"modal-modal-title",variant:"h6",component:"h2",children:["Filter ",(0,j.jsx)(W.A,{style:{cursor:"pointer"},onClick:a})]}),(0,j.jsx)("p",{children:"which of your products are you looking for?"}),(0,j.jsx)(F,{handleClose:a,isGettingAllequipments:t})]})})]})}const F=e=>{let{handleClose:t,isGettingAllequipments:n}=e;const{searchEquipments:i}=(0,P.ZQ)(),a=(0,f.wA)();return(0,j.jsxs)("form",{children:[i.map((e=>{const{name:t,TextField:n}=e;return(0,j.jsx)("div",{children:n},t)})),(0,j.jsx)(z.S,{background:"inherit",backgroundhover:"rgba(0, 128, 0, 0.9)",height:"8vh",onClick:()=>{a((0,k.sy)())},type:"button",style:{width:"100%",fontWeight:"bold"},children:"reset"}),(0,j.jsx)(z.S,{background:"inherit",backgroundhover:"rgba(0, 128, 0, 0.9)",height:"8vh",onClick:()=>t(),type:"button",style:{width:"100%",fontWeight:"bold"},children:"pending"===n?(0,j.jsx)(y.du,{color:"success"}):"Find Out"})]})};const O=function(){const e=(0,f.wA)(),{columns:t,rows:n,numOfPages:m,count:h,refetch:p,totalEquipments:x,categoryCount:g,statusCount:A,storageLocationCount:v,isGettingAllequipments:y}=E(),{pages:q,tool_name:w,supplier:C,currency:H,status:N,storage_location:$,retired:S,category:W,quantity:z,purchase_cost:P,purchase_date:F,sort:O}=(0,f.d4)((e=>e.equipments));return r.useEffect((()=>{p()}),[q,w,C,H,N,$,S,W,z,P,F,O]),(0,j.jsxs)(c.A,{children:[(0,j.jsx)(l.A,{}),(0,j.jsx)(s.A,{pt:6,pb:3,children:(0,j.jsx)(i.Ay,{container:!0,spacing:6,children:(0,j.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,j.jsxs)(a.A,{children:[(0,j.jsx)(s.A,{mx:2,mt:-3,py:3,px:2,variant:"gradient",bgColor:"info",borderRadius:"lg",coloredShadow:"info",children:(0,j.jsxs)(o.A,{variant:"h6",color:"white",children:["Equipments",h,"/",x,(0,j.jsx)(_.N_,{onClick:()=>e((0,k.sy)()),to:"/createupdateequipment/add",children:"create equipment"}),(0,j.jsx)(G,{isGettingAllequipments:y})]})}),(0,j.jsx)(s.A,{pt:3,children:(0,j.jsx)(u.A,{table:{columns:t,rows:n},isSorted:!1,entriesPerPage:!1,showTotalEntries:!1,noEndBorder:!0})})]}),(0,j.jsx)(b.A,{pageDetails:{handleChange:(t,n)=>{t.preventDefault(),e((0,k.yd)(n))},numOfPages:m,pages:q}})]})})}),(0,j.jsx)(d.A,{})]})},L=()=>{(0,f.wA)();const{id:e}=(0,m.g)(),{equipmentDetails:t}=(0,P.ZQ)(),{isCreatingEquipment:n,createEquipment:a}=(0,C.hN)(),{isUpdatingEquipment:r,updateEquipment:o}=(0,C.vq)(),{isEdit:u,tool_name:p,category:x,quantity:g,status:A,storage_location:b,supplier:q,purchase_date:w,purchase_cost:k,currency:E,last_maintanace_date:H,next_maintanace_date:N,retired:$,note:S}=(0,f.d4)((e=>e.equipments)),W={tool_name:p,category:x,quantity:g,status:A,storage_location:b,supplier:q,purchase_date:w,purchase_cost:k,currency:E,note:S},z={tool_name:p,category:x,quantity:g,status:A,storage_location:b,supplier:q,purchase_date:w,purchase_cost:k,currency:E,last_maintanace_date:H,next_maintanace_date:N,retired:$,note:S};return(0,j.jsxs)(c.A,{children:[(0,j.jsx)(l.A,{}),(0,j.jsx)(s.A,{mt:5,mb:3,children:(0,j.jsx)(i.Ay,{container:!0,spacing:1,children:(0,j.jsxs)(i.Ay,{item:!0,xs:12,md:6,xl:4,sx:{display:"flex"},children:[(0,j.jsx)(h.A,{orientation:"vertical",sx:{ml:-2,mr:1}}),(0,j.jsxs)("div",{children:[(0,j.jsx)(_.N_,{to:"/equipments",children:"Go back"}),(0,j.jsxs)("form",{onSubmit:t=>{t.preventDefault();const n=u?z:W;if(Object.values(n).every((e=>void 0!==e&&null!==e&&""!==e)))return u?o({equipmentdetailsOnEdit:z,id:e}):void a(W);alert("Please fill out all required fields,especially the dates field if available.")},children:[t.filter((e=>!("sort"===e.name||!(u||"retired"!==e.name&&"last_maintanace_date"!==e.name&&"next_maintanace_date"!==e.name)))).map((e=>{const{name:t,TextField:n}=e;return(0,j.jsx)("div",{children:n},t)})),(0,j.jsx)(v.Sv,{background:"#1212121F",backgroundhover:"#59d9d9",size:"100%",height:"3vh",type:"submit",children:"pending"===n||"pending"===r?(0,j.jsx)(y.du,{}):u?"Update":"Submit"})]})]}),(0,j.jsx)(h.A,{orientation:"vertical",sx:{mx:0}})]})})}),(0,j.jsx)(d.A,{})]})}}}]);
//# sourceMappingURL=740.9c964ee6.chunk.js.map