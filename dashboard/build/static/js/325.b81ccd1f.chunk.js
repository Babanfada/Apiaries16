"use strict";(self.webpackChunkapiaries_16_dashboard=self.webpackChunkapiaries_16_dashboard||[]).push([[325],{16325:(e,t,a)=>{a.r(t),a.d(t,{CreateUpdateHarvest:()=>P,default:()=>S});var n=a(68282),i=a(26298),r=a(58294),s=a(83648),o=a(25813),l=a(16789),c=a(59251),d=a(63945),h=a(35016),u=(a(12682),a(49779)),m=(a(85785),a(97950),a(47417),a(77183)),v=a(74503),x=(a(22562),a(38079)),g=a(28326);function p(e){let{info:t,children:a}=e;const[l,c]=(0,r.useState)("horizontal"),[d,h]=(0,r.useState)(0);(0,r.useEffect)((()=>{function e(){return window.innerWidth<v.A.values.sm?c("vertical"):c("horizontal")}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[l]);const{image:u="",station_name:p,location:j}=t;return(0,g.jsxs)(s.A,{position:"relative",mb:5,children:[(0,g.jsx)(s.A,{display:"flex",alignItems:"center",position:"relative",minHeight:"18.75rem",borderRadius:"xl",sx:{backgroundImage:e=>{let{functions:{rgba:t,linearGradient:a},palette:{gradients:n}}=e;return`${a(t(n.info.main,.6),t(n.info.state,.6))}, url(${x})`},backgroundSize:"cover",backgroundPosition:"50%",overflow:"hidden"}}),(0,g.jsxs)(i.A,{sx:{position:"relative",mt:-8,mx:3,py:2,px:2},children:[(0,g.jsxs)(n.Ay,{container:!0,spacing:3,alignItems:"center",children:[(0,g.jsx)(n.Ay,{item:!0,children:(0,g.jsx)(m.A,{src:u,alt:"profile-image",size:"xl",shadow:"sm"})}),(0,g.jsx)(n.Ay,{item:!0,children:(0,g.jsxs)(s.A,{height:"100%",mt:.5,lineHeight:1,children:[(0,g.jsx)(o.A,{variant:"h5",fontWeight:"medium",children:p}),(0,g.jsx)(o.A,{variant:"button",color:"text",fontWeight:"regular",children:j})]})})]}),a]})]})}p.defaultProps={info:{image:"",station_name:"First Name",location:"Last Name"},children:null};var j=a(56084),f=a(24009),A=a(93919),y=a(40068),_=a(15570),H=(a(14149),a(76885)),w=a(17351),b=a(66304),q=a(59030);function C(){const e=(0,j.wA)(),{deleteHarvest:t}=(0,b.C0)(),{isGettingAllHarvest:a,honey_harvest:{harvest:n=[],totalHarvestQuantity:i=0,count:r=0,harvestedVolumeByYear:l=[],qualityRatingCount:c=[],numOfPages:d=0,totalHarvest:h=0}={},refetch:u}=(0,b.cL)(),v=e=>{let{image:t,name:a,year:n,station_id:i}=e;return(0,g.jsxs)(s.A,{display:"flex",alignItems:"center",lineHeight:1,children:[(0,g.jsx)(m.A,{src:t,name:a,size:"sm"}),(0,g.jsxs)(s.A,{ml:2,lineHeight:1,children:[(0,g.jsx)(o.A,{display:"block",variant:"button",fontWeight:"medium",children:(0,g.jsx)(f.N_,{to:`/stations/${i}`,children:`${i} ${a}`})}),(0,g.jsx)(o.A,{variant:"caption",children:n})]})]})};return{columns:[{Header:"harvest",accessor:"harvest",width:"45%",align:"left"},{Header:"station",accessor:"station",width:"45%",align:"left"},{Header:"date",accessor:"date",align:"left"},{Header:"quantity",accessor:"quantity",align:"center"},{Header:"unit",accessor:"unit",align:"center"},{Header:"color",accessor:"color",align:"center"},{Header:"rating",accessor:"rating",align:"center"},{Header:"note",accessor:"note",align:"center"},{Header:"update",accessor:"update",align:"center"},{Header:"remove",accessor:"remove",align:"center"}],rows:n.map(((a,n)=>{const{harvest_id:i,harvest_year:r,station_id:l,station_name:c,harvest_date:d,quantity_collected:h,colouration:u,unit:m,quality_rating:x,note:p}=a,j={harvest_id:i,harvest_year:r,station_id:l,station_name:c,harvest_date:d,quantity_collected:h,colouration:u,unit:m,quality_rating:x,note:p};return{harvest:(0,g.jsx)(o.A,{component:"a",href:"#",variant:"caption",color:"text",fontWeight:"medium",children:i}),station:(0,g.jsx)(v,{image:w.A,year:r,name:c,station_id:l}),date:(0,g.jsx)(o.A,{component:"a",href:"#",variant:"caption",color:"text",fontWeight:"medium",children:d}),quantity:(0,g.jsx)(o.A,{component:"a",href:"#",variant:"caption",color:"text",fontWeight:"medium",children:h}),unit:(0,g.jsx)(s.A,{ml:-1,children:(0,g.jsx)(H.A,{badgeContent:m,color:"litres"===m?"success":"warning",variant:"gradient",size:"sm"})}),color:(0,g.jsx)(o.A,{component:"a",href:"#",variant:"caption",color:"text",fontWeight:"medium",children:u}),rating:(0,g.jsxs)(o.A,{component:"a",href:"#",variant:"caption",color:"text",fontWeight:"medium",children:[x," of 5"]}),note:(0,g.jsx)(o.A,{title:p,component:"a",href:"#",variant:"caption",color:"text",fontWeight:"medium",children:p.length>20?`${p.slice(0,20)}...`:p}),update:(0,g.jsx)(o.A,{component:"a",variant:"caption",color:"text",fontWeight:"medium",children:(0,g.jsx)(f.N_,{onClick:()=>{e((0,q.rG)(j))},to:`/createupdateharvest/${i}`,children:"Edit"})}),remove:(0,g.jsx)(o.A,{component:"a",variant:"caption",color:"text",fontWeight:"medium",children:(0,g.jsx)(f.N_,{onClick:()=>{window.confirm("You are about to Delete an harvest records permanently, ARE YOU SURE?")&&t(i)},children:"remove"})})}})),harvest:n,numOfPages:d,count:r,refetch:u,isGettingAllHarvest:a,totalHarvestQuantity:i,harvestedVolumeByYear:l,qualityRatingCount:c,totalHarvest:h}}var k=a(5519),N=a(82392),W=a(39053),z=a(77846),E=a(7579);const S=function(){const{columns:e=[],rows:t=[],harvest:a,numOfPages:u,count:m,refetch:v,isGettingAllHarvest:x,totalHarvestQuantity:p,harvestedVolumeByYear:y,qualityRatingCount:H,totalHarvest:w}=C()||{},{pages:b,harvest_year:k,station_id:W,station_name:E,harvest_date:S,quantity_collected:P,colouration:$,unit:R,quality_rating:G,note:L,sort:O}=(0,j.d4)((e=>e.harvests))||{},U=(0,j.wA)();return r.useEffect((()=>{v&&v()}),[b,k,W,E,S,P,$,R,G,L,O,v]),(0,g.jsxs)(l.A,{children:[(0,g.jsx)(c.A,{}),(0,g.jsx)(s.A,{pt:6,pb:3,children:(0,g.jsx)(n.Ay,{container:!0,spacing:6,children:(0,g.jsxs)(n.Ay,{item:!0,xs:12,children:[(0,g.jsxs)(i.A,{children:[(0,g.jsx)(s.A,{mx:2,mt:-3,py:3,px:2,variant:"gradient",bgColor:"info",borderRadius:"lg",coloredShadow:"info",children:(0,g.jsxs)(o.A,{className:N.A.wrapper,variant:"h6",color:"white",children:[(0,g.jsxs)(s.A,{className:N.A.inner,children:[(0,g.jsx)(o.A,{color:"white",children:" Honey Harvest"}),(0,g.jsxs)(o.A,{color:"white",children:[m,"/",w]})]}),(0,g.jsxs)(s.A,{className:N.A.inner,children:[(0,g.jsx)(f.N_,{onClick:()=>U((0,q.sy)()),to:"/createupdateharvest/add",children:(0,g.jsx)(z.A,{sx:{fill:"white"},fontSize:"medium",titleAccess:"add a new harvest details"})}),(0,g.jsx)(A.Lo,{isGettingAllHarvest:x})]})]})}),(0,g.jsx)(s.A,{pt:3,children:(0,g.jsx)(h.A,{table:{columns:e,rows:t},isSorted:!1,entriesPerPage:!1,showTotalEntries:!1,noEndBorder:!0})})]}),(0,g.jsx)(_.A,{pageDetails:{handleChange:(e,t)=>{e.preventDefault(),U((0,q.yd)(t))},numOfPages:u,pages:b}})]})})}),(0,g.jsx)(d.A,{})]})},P=()=>{const{id:e}=(0,u.g)(),{harvestInputs:t}=(0,k.H1)(),{isUpdatingHarvest:a,updateHarvest:i}=(0,b.aH)(),{createHarvest:r,isCreatingHarvest:o}=(0,b.LT)(),{harvest_year:h,station_id:m,station_name:v,harvest_date:x,quantity_collected:p,colouration:_,unit:H,quality_rating:w,note:q,isEdit:C}=(0,j.d4)((e=>e.harvests)),N={harvest_year:h,station_id:m,station_name:v,harvest_date:x,quantity_collected:p,colouration:_,unit:H,quality_rating:w,note:q};return(0,g.jsxs)(l.A,{children:[(0,g.jsx)(c.A,{}),(0,g.jsx)(s.A,{mt:5,mb:3,children:(0,g.jsx)(n.Ay,{className:W.A.wrapper,container:!0,spacing:1,children:(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{children:[(0,g.jsx)(f.N_,{to:"/harvests",children:(0,g.jsx)(E.A,{})}),(0,g.jsxs)("h6",{children:[C?`Update harvest details for ${v}`:"Create harvest details"," "]}),(0,g.jsx)("div",{})]}),(0,g.jsxs)("form",{className:W.A.form,onSubmit:t=>{t.preventDefault();if(Object.values(N).every((e=>void 0!==e&&null!==e&&""!==e)))return C?i({harvestDetails:N,id:e}):void r(N);alert("Please fill out all required fields.")},children:[t.filter((e=>"sort"!==e.name)).map((e=>{const{name:t,TextField:a}=e;return(0,g.jsx)("div",{children:a},t)})),(0,g.jsx)(A.Sv,{background:"inherit",backgroundhover:"grey",size:"100%",height:"3vh",type:"submit",children:"pending"===o||"pending"===a?(0,g.jsx)(y.du,{}):C?"Update":"Submit"})]})]})})}),(0,g.jsx)(d.A,{})]})}}}]);
//# sourceMappingURL=325.b81ccd1f.chunk.js.map