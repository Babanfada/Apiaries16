"use strict";(self.webpackChunkapiaries_16_dashboard=self.webpackChunkapiaries_16_dashboard||[]).push([[630],{57630:(e,i,n)=>{n.r(i),n.d(i,{CreateUpdateProvision:()=>E,default:()=>q});var t=n(68282),r=n(26298),s=n(58294),o=n(83648),a=n(25813),c=n(16789),l=n(59251),d=n(63945),p=n(35016),h=(n(12682),n(49779)),m=(n(85785),n(97950),n(47417),n(77183)),u=n(74503),v=(n(22562),n(38079)),x=n(28326);function g(e){let{info:i,children:n}=e;const[c,l]=(0,s.useState)("horizontal"),[d,p]=(0,s.useState)(0);(0,s.useEffect)((()=>{function e(){return window.innerWidth<u.A.values.sm?l("vertical"):l("horizontal")}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[c]);const{image:h="",hive_type:g,status:A}=i;return(0,x.jsxs)(o.A,{position:"relative",mb:5,children:[(0,x.jsx)(o.A,{display:"flex",alignItems:"center",position:"relative",minHeight:"18.75rem",borderRadius:"xl",sx:{backgroundImage:e=>{let{functions:{rgba:i,linearGradient:n},palette:{gradients:t}}=e;return`${n(i(t.info.main,.6),i(t.info.state,.6))}, url(${v})`},backgroundSize:"cover",backgroundPosition:"50%",overflow:"hidden"}}),(0,x.jsxs)(r.A,{sx:{position:"relative",mt:-8,mx:3,py:2,px:2},children:[(0,x.jsxs)(t.Ay,{container:!0,spacing:3,alignItems:"center",children:[(0,x.jsx)(t.Ay,{item:!0,children:(0,x.jsx)(m.A,{src:h,alt:"profile-image",size:"xl",shadow:"sm"})}),(0,x.jsx)(t.Ay,{item:!0,children:(0,x.jsxs)(o.A,{height:"100%",mt:.5,lineHeight:1,children:[(0,x.jsx)(a.A,{variant:"h5",fontWeight:"medium",children:g}),(0,x.jsx)(a.A,{variant:"button",color:"text",fontWeight:"regular",children:A})]})})]}),n]})]})}g.defaultProps={info:{image:"",hive_type:"First Name",status:"Last Name"},children:null};var A=n(56084),j=n(24009),f=n(79147),_=n(40068),y=n(15570),w=(n(74996),n(14149),n(35126)),b=(n(76885),n(96338)),P=n(36800);function N(){const e=(0,A.wA)(),{deleteProvision:i}=(0,P.Y8)(),{isGettingAllprovisions:n,supplyProvision:{provisions:t=[],count:r=0,numOfPages:s=0,totalProvisions:c=0}={},refetch:l}=(0,P.Cz)(),d=e=>{let{image:i,item_name:n,item_id:t}=e;return(0,x.jsxs)(o.A,{display:"flex",alignItems:"center",lineHeight:1,children:[(0,x.jsx)(m.A,{src:i,size:"sm"}),(0,x.jsxs)(o.A,{ml:2,lineHeight:1,children:[(0,x.jsx)(a.A,{display:"block",variant:"button",fontWeight:"medium",children:`${t} `}),(0,x.jsx)(a.A,{variant:"caption",children:n})]})]})};return{columns:[{Header:"provisions",accessor:"provisions",width:"45%",align:"left"},{Header:"service",accessor:"service",align:"left"},{Header:"description",accessor:"description",align:"center"},{Header:"quantity",accessor:"quantity",align:"center"},{Header:"price",accessor:"price",align:"center"},{Header:"update",accessor:"update",align:"center"},{Header:"remove",accessor:"remove",align:"center"}],rows:t.map(((n,t)=>{const{item_id:r,service_id:s,item_name:o,description:c,quantity:l,price_NGN:p}=n,h={service_id:s,item_name:o,description:c,quantity:l,price_NGN:p};return{provisions:(0,x.jsx)(d,{image:b.A,item_name:o,item_id:r}),service:(0,x.jsx)(a.A,{component:"a",href:"#",variant:"caption",color:"text",fontWeight:"medium",children:s}),description:(0,x.jsx)(a.A,{title:c,component:"a",href:"#",variant:"caption",color:"text",fontWeight:"medium",children:c.length>20?`${c.slice(0,20)}...`:c}),quantity:(0,x.jsxs)(a.A,{component:"a",href:"#",variant:"caption",color:"text",fontWeight:"medium",children:["# ",l]}),price:(0,x.jsxs)(a.A,{component:"a",href:"#",variant:"caption",color:"text",fontWeight:"medium",children:["# ",p]}),update:(0,x.jsx)(a.A,{component:"a",variant:"caption",color:"text",fontWeight:"medium",children:(0,x.jsx)(j.N_,{onClick:()=>{e((0,w.fp)(h))},to:`/createupdateprovision/${r}`,children:"Edit"})}),remove:(0,x.jsx)(a.A,{component:"a",variant:"caption",color:"text",fontWeight:"medium",onClick:()=>{window.confirm("You are about to Delete a provision records permanently, ARE YOU SURE?")&&i(r)},children:(0,x.jsx)(j.N_,{children:"remove"})})}})),numOfPages:s,refetch:l,count:r,isGettingAllprovisions:n,totalProvisions:c}}var k=n(82592),z=n(82392),H=n(39053),S=n(77846),C=n(7579);const q=function(){const e=(0,A.wA)(),{rows:i,numOfPages:n,refetch:h,count:m,columns:u,isGettingAllprovisions:v,totalProvisions:g}=N(),{item_id:_,item_name:b,description:P,quantity:k,price:H,sort:C,pages:q,priceRangeSP:E}=(0,A.d4)((e=>e.provisions));return s.useEffect((()=>{h()}),[q,_,b,P,k,H,C,E]),(0,x.jsxs)(c.A,{children:[(0,x.jsx)(l.A,{}),(0,x.jsx)(o.A,{pt:6,pb:3,children:(0,x.jsx)(t.Ay,{container:!0,spacing:6,children:(0,x.jsxs)(t.Ay,{item:!0,xs:12,children:[(0,x.jsxs)(r.A,{children:[(0,x.jsx)(o.A,{mx:2,mt:-3,py:3,px:2,variant:"gradient",bgColor:"info",borderRadius:"lg",coloredShadow:"info",children:(0,x.jsxs)(a.A,{className:z.A.wrapper,variant:"h6",color:"white",children:[(0,x.jsxs)(o.A,{className:z.A.inner,children:[(0,x.jsx)(a.A,{color:"white",children:" Provisions"}),(0,x.jsxs)(a.A,{color:"white",children:[m,"/",g]})]}),(0,x.jsxs)(o.A,{className:z.A.inner,children:[(0,x.jsx)(j.N_,{onClick:()=>e((0,w.sy)()),to:"/createupdateprovision/add",children:(0,x.jsx)(S.A,{sx:{fill:"white"},fontSize:"medium",titleAccess:"add a new provision"})}),(0,x.jsx)(f.zv,{isGettingAllprovisions:v})]})]})}),(0,x.jsx)(o.A,{pt:3,children:(0,x.jsx)(p.A,{table:{columns:u,rows:i},isSorted:!1,entriesPerPage:!1,showTotalEntries:!1,noEndBorder:!0})})]}),(0,x.jsx)(y.A,{pageDetails:{handleChange:(i,n)=>{i.preventDefault(),e((0,w.yd)(n))},numOfPages:n,pages:q}})]})})}),(0,x.jsx)(d.A,{})]})},E=()=>{const{id:e}=(0,h.g)(),{provisionInputs:i}=(0,k.Iu)(),{isUpdatingProvision:n,updateProvision:r}=(0,P.qO)(),{createProvision:s,isCreatingProvision:a}=(0,P.zo)(),{service_id:p,item_name:m,description:u,quantity:v,price_NGN:g,isEdit:y}=(0,A.d4)((e=>e.provisions)),w={service_id:p,item_name:m,description:u,quantity:v,price_NGN:g};return(0,x.jsxs)(c.A,{children:[(0,x.jsx)(l.A,{}),(0,x.jsx)(o.A,{mt:5,mb:3,children:(0,x.jsx)(t.Ay,{className:H.A.wrapper,container:!0,spacing:1,children:(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{children:[(0,x.jsx)(j.N_,{to:"/provisions",children:(0,x.jsx)(C.A,{})}),(0,x.jsxs)("h6",{children:[y?`Update item ${m}'s details`:"Create Provision Item"," "]}),(0,x.jsx)("div",{})]}),(0,x.jsxs)("form",{className:H.A.form,onSubmit:i=>{i.preventDefault();if(Object.values(w).every((e=>void 0!==e&&null!==e&&""!==e)))return y?r({provisionDetails:w,id:e}):void s(w);alert("Please fill out all required fields.")},children:[i.filter((e=>"sort"!==e.name&&"priceRangeSP"!==e.name)).map((e=>{const{name:i,TextField:n}=e;return(0,x.jsx)("div",{children:n},i)})),(0,x.jsx)(f.Sv,{background:"inherit",backgroundhover:"grey",size:"100%",height:"3vh",type:"submit",children:"pending"===a||"pending"===n?(0,x.jsx)(_.du,{}):y?"Update":"Submit"})]})]})})}),(0,x.jsx)(d.A,{})]})}},77846:(e,i,n)=>{var t=n(5855);i.A=void 0;var r=t(n(93496)),s=n(28326),o=(0,r.default)((0,s.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");i.A=o}}]);
//# sourceMappingURL=630.42439cae.chunk.js.map