"use strict";(self.webpackChunkapiaries_16_dashboard=self.webpackChunkapiaries_16_dashboard||[]).push([[944],{97944:(e,n,i)=>{i.r(n),i.d(n,{CreateUpdateNok:()=>R,default:()=>L});var t=i(68282),s=i(26298),r=i(58294),o=i(83648),a=i(25813),l=i(16789),d=i(59251),c=i(63945),h=i(35016),m=(i(12682),i(49779)),p=(i(85785),i(97950),i(47417),i(77183)),u=i(74503),x=(i(22562),i(38079)),g=i(28326);function j(e){let{info:n,children:i}=e;const[l,d]=(0,r.useState)("horizontal"),[c,h]=(0,r.useState)(0);(0,r.useEffect)((()=>{function e(){return window.innerWidth<u.A.values.sm?d("vertical"):d("horizontal")}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[l]);const{image:m="",station_name:j,location:f}=n;return(0,g.jsxs)(o.A,{position:"relative",mb:5,children:[(0,g.jsx)(o.A,{display:"flex",alignItems:"center",position:"relative",minHeight:"18.75rem",borderRadius:"xl",sx:{backgroundImage:e=>{let{functions:{rgba:n,linearGradient:i},palette:{gradients:t}}=e;return`${i(n(t.info.main,.6),n(t.info.state,.6))}, url(${x})`},backgroundSize:"cover",backgroundPosition:"50%",overflow:"hidden"}}),(0,g.jsxs)(s.A,{sx:{position:"relative",mt:-8,mx:3,py:2,px:2},children:[(0,g.jsxs)(t.Ay,{container:!0,spacing:3,alignItems:"center",children:[(0,g.jsx)(t.Ay,{item:!0,children:(0,g.jsx)(p.A,{src:m,alt:"profile-image",size:"xl",shadow:"sm"})}),(0,g.jsx)(t.Ay,{item:!0,children:(0,g.jsxs)(o.A,{height:"100%",mt:.5,lineHeight:1,children:[(0,g.jsx)(a.A,{variant:"h5",fontWeight:"medium",children:j}),(0,g.jsx)(a.A,{variant:"button",color:"text",fontWeight:"regular",children:f})]})})]}),i]})]})}j.defaultProps={info:{image:"",station_name:"First Name",location:"Last Name"},children:null};var f=i(56084),A=i(24009),k=i(93919),v=i(40068),b=i(15570),y=(i(14149),i(76885)),N=i(21806),w=i(39076),C=i(18434);function _(){const{deleteNok:e}=(0,w.Xz)(),n=(0,f.wA)(),{isGettingAllNok:i,refetch:t,noks:{employeesNOK:s=[],genderTypeCount:r=[],numOfPages:l,totalEmployeesNOK:d=0,count:c=0,relationshipTypeCount:h=[]}={}}=(0,w.LJ)(),m=e=>{let{image:n,name:i,email:t,nok_id:s}=e;return(0,g.jsxs)(o.A,{display:"flex",alignItems:"center",lineHeight:1,children:[(0,g.jsx)(p.A,{src:n,name:i,size:"sm"}),(0,g.jsxs)(o.A,{ml:2,lineHeight:1,children:[(0,g.jsx)(a.A,{display:"block",variant:"button",fontWeight:"medium",children:(0,g.jsx)(A.N_,{children:`${s} ${i}`})}),(0,g.jsx)(a.A,{variant:"caption",children:t})]})]})};return{columns:[{Header:"nok",accessor:"nok",width:"45%",align:"left"},{Header:"employee",accessor:"employee",width:"45%",align:"left"},{Header:"address",accessor:"address",align:"left"},{Header:"phone",accessor:"phone",align:"center"},{Header:"gender",accessor:"gender",align:"center"},{Header:"relationship",accessor:"relationship",align:"center"},{Header:"update",accessor:"update",align:"center"},{Header:"remove",accessor:"remove",align:"center"}],rows:s.map(((i,t)=>{const{nok_id:s,emp_id:r,fullname:l,email:d,address:c,phone:h,gender:p,relationship:u}=i,x={nok_id:s,emp_id:r,fullname:l,email:d,address:c,phone:h,gender:p,relationship:u};return{nok:(0,g.jsx)(m,{image:N.A,name:l,email:d,nok_id:s}),employee:(0,g.jsx)(a.A,{component:"a",href:"#",variant:"caption",color:"text",fontWeight:"medium",children:(0,g.jsx)(A.N_,{to:`/employees/${r}`,children:r})}),address:(0,g.jsx)(a.A,{component:"a",href:"#",variant:"caption",color:"text",fontWeight:"medium",children:c}),phone:(0,g.jsx)(a.A,{component:"a",href:"#",variant:"caption",color:"text",fontWeight:"medium",children:h}),gender:(0,g.jsx)(o.A,{ml:-1,children:(0,g.jsx)(y.A,{badgeContent:p,color:"male"===p?"success":"warning",variant:"gradient",size:"sm"})}),relationship:(0,g.jsx)(o.A,{ml:-1,children:(0,g.jsx)(y.A,{badgeContent:u,color:"spouse"===u?"success":"parent"===u?"warning":"guidance"===u?"error":"info",variant:"gradient",size:"sm"})}),update:(0,g.jsx)(a.A,{component:"a",variant:"caption",color:"text",fontWeight:"medium",children:(0,g.jsx)(A.N_,{onClick:()=>{n((0,C.wg)(x))},to:`/createupdatenok/${s}`,children:"Edit"})}),remove:(0,g.jsx)(a.A,{component:"a",variant:"caption",color:"text",fontWeight:"medium",children:(0,g.jsx)(A.N_,{onClick:()=>{window.confirm("You are about to Delete an next of kin records permanently, ARE YOU SURE?")&&e(s)},children:"remove"})})}})),isGettingAllNok:i,employeesNOK:s,genderTypeCount:r,numOfPages:l,totalEmployeesNOK:d,count:c,relationshipTypeCount:h,refetch:t}}var S=i(40447),O=i(35981),z=i(48781),E=i(18509),H=i(64977),W=i(5519),K=i(1489),P=i(17633);const T={position:"absolute",bgcolor:"background.paper",boxShadow:24,p:4};function G(e){let{isGettingAllNok:n}=e;const[i,t]=r.useState(!1),s=()=>t(!1);return(0,g.jsxs)("div",{className:P.A.wrapper,children:[(0,g.jsx)("div",{children:(0,g.jsx)(K.A,{fontSize:"medium",onClick:()=>t(!0),sx:{cursor:"pointer",fill:"white"},title:"search"})}),(0,g.jsx)(z.A,{open:i,onClose:s,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,g.jsxs)(S.A,{sx:{...T,background:"white"},className:P.A.box,children:[(0,g.jsxs)(O.A,{id:"modal-modal-title",variant:"h6",component:"h2",children:["Search Next of Kin ",(0,g.jsx)(E.A,{style:{cursor:"pointer"},onClick:s})]}),(0,g.jsx)("p",{children:"which NOK are you looking for?"}),(0,g.jsx)(D,{handleClose:s,isGettingAllNok:n})]})})]})}const D=e=>{let{handleClose:n,isGettingAllNok:i}=e;const{nokDetails:t}=(0,W.cj)(),s=(0,f.wA)();return(0,g.jsxs)("form",{className:P.A.paper,children:[t.filter((e=>"address"!=e.name)).map((e=>{const{name:n,TextField:i}=e;return(0,g.jsx)("div",{children:i},n)})),(0,g.jsx)(H.S,{background:"inherit",backgroundhover:"grey",height:"8vh",onClick:()=>{s((0,C.sy)())},type:"button",style:{width:"100%",fontWeight:"bold"},children:"reset"}),(0,g.jsx)(H.S,{background:"inherit",backgroundhover:"grey",height:"8vh",onClick:()=>n(),type:"button",style:{width:"100%",fontWeight:"bold"},children:"pending"===i?(0,g.jsx)(v.du,{color:"success"}):"Find Out"})]})};var $=i(82392),U=i(39053),I=i(77846),F=i(7579);const L=function(){const{isGettingAllNok:e=!1,employeesNOK:n=[],genderTypeCount:i=0,numOfPages:m=1,totalEmployeesNOK:p=0,count:u=0,relationshipTypeCount:x=0,refetch:j,columns:k=[],rows:v=[]}=_()||{},{pages:y=1,emp_id:N,fullname:w,email:S,address:O,phone:z,gender:E,relationship:H,sort:W}=(0,f.d4)((e=>e.noks))||{},K=(0,f.wA)();return r.useEffect((()=>{j&&j()}),[N,w,S,O,z,E,H,y,W,j]),(0,g.jsxs)(l.A,{children:[(0,g.jsx)(d.A,{}),(0,g.jsx)(o.A,{pt:6,pb:3,children:(0,g.jsx)(t.Ay,{container:!0,spacing:6,children:(0,g.jsxs)(t.Ay,{item:!0,xs:12,children:[(0,g.jsxs)(s.A,{children:[(0,g.jsx)(o.A,{mx:2,mt:-3,py:3,px:2,variant:"gradient",bgColor:"info",borderRadius:"lg",coloredShadow:"info",children:(0,g.jsxs)(a.A,{className:$.A.wrapper,variant:"h6",color:"white",children:[(0,g.jsxs)(o.A,{className:$.A.inner,children:[(0,g.jsx)(a.A,{color:"white",children:"Next of Kin"}),(0,g.jsxs)(a.A,{color:"white",children:[u,"/",p]})]}),(0,g.jsxs)(o.A,{className:$.A.inner,children:[(0,g.jsx)(A.N_,{onClick:()=>K((0,C.sy)()),to:"/createupdatenok/add",children:(0,g.jsx)(I.A,{sx:{fill:"white"},fontSize:"medium",titleAccess:"add next of kin"})}),(0,g.jsx)(G,{isGettingAllNok:e})]})]})}),(0,g.jsx)(o.A,{pt:3,children:(0,g.jsx)(h.A,{table:{columns:k,rows:v},isSorted:!1,entriesPerPage:!1,showTotalEntries:!1,noEndBorder:!0})})]}),(0,g.jsx)(b.A,{pageDetails:{handleChange:(e,n)=>{e.preventDefault(),K((0,C.yd)(n))},numOfPages:m,pages:y}})]})})}),(0,g.jsx)(c.A,{})]})},R=()=>{const{id:e}=(0,m.g)(),{createNok:n,isCreatingNok:i}=(0,w.yI)(),{updateNok:s,isUpdatingNok:r}=(0,w.v2)(),{nokDetails:a}=(0,W.cj)(),{emp_id:h,fullname:p,email:u,address:x,phone:j,gender:b,relationship:y,isEdit:N}=(0,f.d4)((e=>e.noks)),C={emp_id:h,fullname:p,email:u,address:x,phone:j,gender:b,relationship:y};return(0,g.jsxs)(l.A,{children:[(0,g.jsx)(d.A,{}),(0,g.jsx)(o.A,{mt:5,mb:3,children:(0,g.jsx)(t.Ay,{className:U.A.wrapper,container:!0,spacing:1,children:(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{children:[(0,g.jsx)(A.N_,{to:"/noks",children:(0,g.jsx)(F.A,{})}),(0,g.jsxs)("h6",{children:[N?`Update ${p} details`:"Create Next Of Kin"," "]}),(0,g.jsx)("div",{})]}),(0,g.jsxs)("form",{className:U.A.form,onSubmit:i=>{i.preventDefault();if(Object.values(C).every((e=>void 0!==e&&null!==e&&""!==e)))return N?s({nokDetails:C,id:e}):void n(C);alert("Please fill out all required fields.")},children:[a.filter((e=>"sort"!==e.name)).map((e=>{const{name:n,TextField:i}=e;return(0,g.jsx)("div",{children:i},n)})),(0,g.jsx)(k.Sv,{background:"inherit",backgroundhover:"grey",size:"100%",height:"3vh",type:"submit",children:"pendiNokuseCreateNok "===i||"pending"===r?(0,g.jsx)(v.du,{}):N?"Update":"Submit"})]})]})})}),(0,g.jsx)(c.A,{})]})}}}]);
//# sourceMappingURL=944.1cbcd262.chunk.js.map